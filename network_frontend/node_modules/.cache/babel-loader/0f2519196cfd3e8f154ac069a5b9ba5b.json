{"ast":null,"code":"import axios from \"axios\";\nimport { USER_LOADED, USER_LOADING, AUTH_ERROR, LOGIN_SUCCESS, LOGIN_FAIL } from './types'; // Check token and load user\n\nexport const loadUser = () => (dispatch, getState) => {\n  // User loadin \n  dispatch({\n    type: USER_LOADING\n  }); // Get token from state\n\n  const token = getState().auth.token; // Headers \n\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }; // If token, add to headers config\n\n  if (token) {\n    config.headers['Autorization'] = `Token ${token}`;\n  }\n\n  axios.get('http://127.0.0.1:8000/api/auth/user', config).then(res => {\n    dispatch({\n      type: USER_LOADED,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(\"authentication error\");\n    dispatch({\n      type: AUTH_ERROR\n    });\n  });\n}; //LOGIN User\n\nexport const login = (username, password) => dispatch => {\n  // Headers \n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }; // Request Body \n\n  const body = JSON.stringify({\n    username,\n    password\n  });\n  axios.post('http://127.0.0.1:8000/api/auth/login', body, config).then(res => {\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(\"authentication error\");\n    dispatch({\n      type: LOGIN_FAIL\n    });\n  });\n}; // Register User\n\nexport default register = ({\n  username,\n  email,\n  password\n}) => dispatch => {\n  //Headers\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }; // Request Body\n\n  const body = JSON.stringify({\n    username,\n    email,\n    password\n  });\n  axios.post('http://127.0.0.1:8000/api/auth/register', body, config).then(res => {\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: res.data\n    });\n  }).catch();\n};","map":{"version":3,"sources":["/Users/thomasnewton/Desktop/network_frontend/src/actions/auth.js"],"names":["axios","USER_LOADED","USER_LOADING","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","loadUser","dispatch","getState","type","token","auth","config","headers","get","then","res","payload","data","catch","err","console","log","login","username","password","body","JSON","stringify","post","register","email","REGISTER_SUCCESS"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SACIC,WADJ,EAEIC,YAFJ,EAGIC,UAHJ,EAIIC,aAJJ,EAKIC,UALJ,QAMO,SANP,C,CASA;;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAM,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAClD;AACAD,EAAAA,QAAQ,CAAE;AAAEE,IAAAA,IAAI,EAAEP;AAAR,GAAF,CAAR,CAFkD,CAIlD;;AACA,QAAMQ,KAAK,GAAGF,QAAQ,GAAGG,IAAX,CAAgBD,KAA9B,CALkD,CAOlD;;AACA,QAAME,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAG;AACN,sBAAgB;AADV;AADC,GAAf,CARkD,CAclD;;AACA,MAAGH,KAAH,EAAU;AACNE,IAAAA,MAAM,CAACC,OAAP,CAAe,cAAf,IAAkC,SAAQH,KAAM,EAAhD;AACH;;AAEDV,EAAAA,KAAK,CAACc,GAAN,CAAU,qCAAV,EAAiDF,MAAjD,EACKG,IADL,CACUC,GAAG,IAAI;AACTT,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAER,WADD;AAELgB,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFR,KAAD,CAAR;AAIH,GANL,EAMOC,KANP,CAMaC,GAAG,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAf,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEN;AADD,KAAD,CAAR;AAGH,GAXL;AAYH,CA/BM,C,CAiCP;;AAEA,OAAO,MAAMoB,KAAK,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAyBlB,QAAD,IAAc;AAEvD;AACA,QAAMK,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAG;AACN,sBAAgB;AADV;AADC,GAAf,CAHuD,CASvD;;AACA,QAAMa,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AAACJ,IAAAA,QAAD;AAAWC,IAAAA;AAAX,GAAf,CAAb;AAEAzB,EAAAA,KAAK,CACA6B,IADL,CACU,sCADV,EACkDH,IADlD,EACwDd,MADxD,EAEKG,IAFL,CAEWC,GAAD,IAAS;AACXT,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEL,aADD;AAELa,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFR,KAAD,CAAR;AAIH,GAPL,EAQKC,KARL,CAQYC,GAAD,IAAS;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAf,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEJ;AADD,KAAD,CAAR;AAGH,GAbL;AAcH,CA1BM,C,CA4BP;;AAEA,eAAeyB,QAAQ,GAAG,CAAC;AAACN,EAAAA,QAAD;AAAWO,EAAAA,KAAX;AAAkBN,EAAAA;AAAlB,CAAD,KAAkClB,QAAD,IAAc;AAErE;AACA,QAAMK,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAG;AACN,sBAAgB;AADV;AADC,GAAf,CAHqE,CASrE;;AACA,QAAMa,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AAACJ,IAAAA,QAAD;AAAWO,IAAAA,KAAX;AAAkBN,IAAAA;AAAlB,GAAf,CAAb;AAEAzB,EAAAA,KAAK,CACA6B,IADL,CACU,yCADV,EACqDH,IADrD,EAC2Dd,MAD3D,EAEKG,IAFL,CAEWC,GAAD,IAAS;AACXT,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEuB,gBADD;AAELf,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFR,KAAD,CAAR;AAIH,GAPL,EAQKC,KARL;AASH,CArBD","sourcesContent":["import axios from \"axios\";\n\nimport {\n    USER_LOADED, \n    USER_LOADING, \n    AUTH_ERROR,\n    LOGIN_SUCCESS, \n    LOGIN_FAIL\n} from './types'\n\n\n// Check token and load user\n\nexport const loadUser = () => (dispatch, getState) => {\n    // User loadin \n    dispatch ({ type: USER_LOADING })\n\n    // Get token from state\n    const token = getState().auth.token\n\n    // Headers \n    const config = {\n        headers : {\n            \"Content-Type\": \"application/json\"\n        }\n    }\n\n    // If token, add to headers config\n    if(token) {\n        config.headers['Autorization'] = `Token ${token}`;\n    }\n\n    axios.get('http://127.0.0.1:8000/api/auth/user', config)\n        .then(res => {\n            dispatch({\n                type: USER_LOADED,\n                payload: res.data\n            });\n        }).catch(err => {\n            console.log(\"authentication error\")\n            dispatch({\n                type: AUTH_ERROR\n            })\n        })\n}\n\n//LOGIN User\n\nexport const login = (username, password) => (dispatch) => {\n\n    // Headers \n    const config = {\n        headers : {\n            \"Content-Type\": \"application/json\"\n        }\n    }\n\n    // Request Body \n    const body = JSON.stringify({username, password})\n\n    axios\n        .post('http://127.0.0.1:8000/api/auth/login', body, config)\n        .then((res) => {\n            dispatch({\n                type: LOGIN_SUCCESS,\n                payload: res.data\n            });\n        })\n        .catch((err) => {\n            console.log(\"authentication error\")\n            dispatch({\n                type: LOGIN_FAIL\n            });\n        });\n};\n\n// Register User\n\nexport default register = ({username, email, password}) => (dispatch) => {\n\n    //Headers\n    const config = {\n        headers : {\n            \"Content-Type\": \"application/json\"\n        }\n    }\n\n    // Request Body\n    const body = JSON.stringify({username, email, password})\n\n    axios\n        .post('http://127.0.0.1:8000/api/auth/register', body, config)\n        .then((res) => {\n            dispatch({\n                type: REGISTER_SUCCESS, \n                payload: res.data\n            });\n        })\n        .catch()\n}\n\n\n"]},"metadata":{},"sourceType":"module"}