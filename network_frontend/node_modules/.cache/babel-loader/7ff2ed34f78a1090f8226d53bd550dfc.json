{"ast":null,"code":"import axios from \"axios\";\nimport { USER_LOADED, USER_LOADING, AUTH_ERROR, LOGIN_SUCCESS, LOGIN_FAIL, REGISTER_SUCCESS, REGISTER_FAIL, LOGOUT_SUCCESS } from './types'; // Check token and load user\n\nexport const loadUser = () => (dispatch, getState) => {\n  // User loadin \n  dispatch({\n    type: USER_LOADING\n  }); // Get token from state\n\n  const token = getState().auth.token; // Headers \n\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }; // If token, add to headers config\n\n  if (token) {\n    config.headers['Autorization'] = `Token ${token}`;\n  }\n\n  axios.get('http://127.0.0.1:8000/api/auth/user', config).then(res => {\n    dispatch({\n      type: USER_LOADED,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(\"authentication error\");\n    dispatch({\n      type: AUTH_ERROR\n    });\n  });\n}; //LOGIN User\n\nexport const login = (username, password) => dispatch => {\n  // Headers \n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }; // Request Body \n\n  const body = JSON.stringify({\n    username,\n    password\n  });\n  axios.post('http://127.0.0.1:8000/api/auth/login', body, config).then(res => {\n    dispatch({\n      type: LOGIN_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(\"authentication error\");\n    dispatch({\n      type: LOGIN_FAIL\n    });\n  });\n}; // Register User\n\nexport const register = ({\n  username,\n  password,\n  email\n}) => dispatch => {\n  //Headers\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  }; // Request Body\n\n  const body = JSON.stringify({\n    username,\n    email,\n    password\n  });\n  axios.post('http://127.0.0.1:8000/api/auth/register', body, config).then(res => {\n    dispatch({\n      type: REGISTER_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    console.log(\"registration error\");\n    dispatch({\n      type: REGISTER_FAIL\n    });\n  });\n}; // Logout User \n\nexport const logout = () => (dispatch, getState) => {\n  console.log(\"logout \");\n  axios.post('http://127.0.0.1:8000/api/auth/logout', null, tokenConfig(getState)).then(res => {\n    dispatch({\n      type: 'CLEAR_LEADS'\n    });\n    dispatch({\n      type: LOGOUT_SUCCESS\n    });\n  }).catch(err => {\n    console.log(\"logout error\");\n  });\n}; // Setup config with token - helper function\n\nexport const tokenConfig = getState => {\n  // Get token from state\n  const token = getState().auth.token; // Headers\n\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }; // If token, add to headers config\n\n  if (token) {\n    config.headers['Authorization'] = `Token ${token}`;\n  }\n\n  return config;\n};","map":{"version":3,"sources":["/Users/thomasnewton/Desktop/network_frontend/src/actions/auth.js"],"names":["axios","USER_LOADED","USER_LOADING","AUTH_ERROR","LOGIN_SUCCESS","LOGIN_FAIL","REGISTER_SUCCESS","REGISTER_FAIL","LOGOUT_SUCCESS","loadUser","dispatch","getState","type","token","auth","config","headers","get","then","res","payload","data","catch","err","console","log","login","username","password","body","JSON","stringify","post","register","email","logout","tokenConfig"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SACIC,WADJ,EAEIC,YAFJ,EAGIC,UAHJ,EAIIC,aAJJ,EAKIC,UALJ,EAMIC,gBANJ,EAOIC,aAPJ,EAQIC,cARJ,QASO,SATP,C,CAYA;;AAEA,OAAO,MAAMC,QAAQ,GAAG,MAAM,CAACC,QAAD,EAAWC,QAAX,KAAwB;AAClD;AACAD,EAAAA,QAAQ,CAAE;AAAEE,IAAAA,IAAI,EAAEV;AAAR,GAAF,CAAR,CAFkD,CAIlD;;AACA,QAAMW,KAAK,GAAGF,QAAQ,GAAGG,IAAX,CAAgBD,KAA9B,CALkD,CAOlD;;AACA,QAAME,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAG;AACN,sBAAgB;AADV;AADC,GAAf,CARkD,CAclD;;AACA,MAAGH,KAAH,EAAU;AACNE,IAAAA,MAAM,CAACC,OAAP,CAAe,cAAf,IAAkC,SAAQH,KAAM,EAAhD;AACH;;AAEDb,EAAAA,KAAK,CAACiB,GAAN,CAAU,qCAAV,EAAiDF,MAAjD,EACKG,IADL,CACUC,GAAG,IAAI;AACTT,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEX,WADD;AAELmB,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFR,KAAD,CAAR;AAIH,GANL,EAMOC,KANP,CAMaC,GAAG,IAAI;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAf,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAET;AADD,KAAD,CAAR;AAGH,GAXL;AAYH,CA/BM,C,CAiCP;;AAEA,OAAO,MAAMuB,KAAK,GAAG,CAACC,QAAD,EAAWC,QAAX,KAAyBlB,QAAD,IAAc;AAEvD;AACA,QAAMK,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAG;AACN,sBAAgB;AADV;AADC,GAAf,CAHuD,CASvD;;AACA,QAAMa,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AAACJ,IAAAA,QAAD;AAAWC,IAAAA;AAAX,GAAf,CAAb;AAEA5B,EAAAA,KAAK,CACAgC,IADL,CACU,sCADV,EACkDH,IADlD,EACwDd,MADxD,EAEKG,IAFL,CAEWC,GAAD,IAAS;AACXT,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAER,aADD;AAELgB,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFR,KAAD,CAAR;AAIH,GAPL,EAQKC,KARL,CAQYC,GAAD,IAAS;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAf,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEP;AADD,KAAD,CAAR;AAGH,GAbL;AAcH,CA1BM,C,CA4BP;;AAEA,OAAO,MAAM4B,QAAQ,GAAG,CAAC;AAACN,EAAAA,QAAD;AAAWC,EAAAA,QAAX;AAAqBM,EAAAA;AAArB,CAAD,KAAkCxB,QAAD,IAAc;AAEnE;AACA,QAAMK,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAG;AACN,sBAAgB;AADV;AADC,GAAf,CAHmE,CASnE;;AACA,QAAMa,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;AAACJ,IAAAA,QAAD;AAAWO,IAAAA,KAAX;AAAkBN,IAAAA;AAAlB,GAAf,CAAb;AAEA5B,EAAAA,KAAK,CACAgC,IADL,CACU,yCADV,EACqDH,IADrD,EAC2Dd,MAD3D,EAEKG,IAFL,CAEWC,GAAD,IAAS;AACXT,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEN,gBADD;AAELc,MAAAA,OAAO,EAAED,GAAG,CAACE;AAFR,KAAD,CAAR;AAIH,GAPL,EAQKC,KARL,CAQYC,GAAD,IAAS;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAf,IAAAA,QAAQ,CAAC;AACLE,MAAAA,IAAI,EAAEL;AADD,KAAD,CAAR;AAGH,GAbL;AAcH,CA1BM,C,CA4BP;;AAEA,OAAO,MAAM4B,MAAM,GAAG,MAAM,CAACzB,QAAD,EAAWC,QAAX,KAAwB;AAEhDa,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AAEAzB,EAAAA,KAAK,CACFgC,IADH,CACQ,uCADR,EACiD,IADjD,EACuDI,WAAW,CAACzB,QAAD,CADlE,EAEGO,IAFH,CAESC,GAAD,IAAS;AACbT,IAAAA,QAAQ,CAAC;AAAEE,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAR;AACAF,IAAAA,QAAQ,CAAC;AACPE,MAAAA,IAAI,EAAEJ;AADC,KAAD,CAAR;AAGD,GAPH,EAQGc,KARH,CAQUC,GAAD,IAAS;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACD,GAVH;AAWD,CAfI,C,CAkBP;;AACA,OAAO,MAAMW,WAAW,GAAIzB,QAAD,IAAc;AACrC;AACA,QAAME,KAAK,GAAGF,QAAQ,GAAGG,IAAX,CAAgBD,KAA9B,CAFqC,CAIrC;;AACA,QAAME,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AADI,GAAf,CALqC,CAWrC;;AACA,MAAIH,KAAJ,EAAW;AACTE,IAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAmC,SAAQH,KAAM,EAAjD;AACD;;AAED,SAAOE,MAAP;AACD,CAjBI","sourcesContent":["import axios from \"axios\";\n\nimport {\n    USER_LOADED, \n    USER_LOADING, \n    AUTH_ERROR,\n    LOGIN_SUCCESS, \n    LOGIN_FAIL,\n    REGISTER_SUCCESS, \n    REGISTER_FAIL,\n    LOGOUT_SUCCESS\n} from './types'\n\n\n// Check token and load user\n\nexport const loadUser = () => (dispatch, getState) => {\n    // User loadin \n    dispatch ({ type: USER_LOADING })\n\n    // Get token from state\n    const token = getState().auth.token\n\n    // Headers \n    const config = {\n        headers : {\n            \"Content-Type\": \"application/json\"\n        }\n    }\n\n    // If token, add to headers config\n    if(token) {\n        config.headers['Autorization'] = `Token ${token}`;\n    }\n\n    axios.get('http://127.0.0.1:8000/api/auth/user', config)\n        .then(res => {\n            dispatch({\n                type: USER_LOADED,\n                payload: res.data\n            });\n        }).catch(err => {\n            console.log(\"authentication error\")\n            dispatch({\n                type: AUTH_ERROR\n            })\n        })\n}\n\n//LOGIN User\n\nexport const login = (username, password) => (dispatch) => {\n\n    // Headers \n    const config = {\n        headers : {\n            \"Content-Type\": \"application/json\"\n        }\n    }\n\n    // Request Body \n    const body = JSON.stringify({username, password})\n\n    axios\n        .post('http://127.0.0.1:8000/api/auth/login', body, config)\n        .then((res) => {\n            dispatch({\n                type: LOGIN_SUCCESS,\n                payload: res.data\n            });\n        })\n        .catch((err) => {\n            console.log(\"authentication error\")\n            dispatch({\n                type: LOGIN_FAIL\n            });\n        });\n};\n\n// Register User\n\nexport const register = ({username, password, email}) => (dispatch) => {\n\n    //Headers\n    const config = {\n        headers : {\n            \"Content-Type\": \"application/json\"\n        }\n    }\n\n    // Request Body\n    const body = JSON.stringify({username, email, password})\n\n    axios\n        .post('http://127.0.0.1:8000/api/auth/register', body, config)\n        .then((res) => {\n            dispatch({\n                type: REGISTER_SUCCESS, \n                payload: res.data\n            });\n        })\n        .catch((err) => {\n            console.log(\"registration error\")\n            dispatch({\n                type: REGISTER_FAIL\n            });\n        });\n};\n\n// Logout User \n\nexport const logout = () => (dispatch, getState) => {\n\n    console.log(\"logout \")\n\n    axios\n      .post('http://127.0.0.1:8000/api/auth/logout', null, tokenConfig(getState))\n      .then((res) => {\n        dispatch({ type: 'CLEAR_LEADS' });\n        dispatch({\n          type: LOGOUT_SUCCESS,\n        });\n      })\n      .catch((err) => {\n        console.log(\"logout error\");\n      });\n  };\n\n\n// Setup config with token - helper function\nexport const tokenConfig = (getState) => {\n    // Get token from state\n    const token = getState().auth.token;\n  \n    // Headers\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    };\n  \n    // If token, add to headers config\n    if (token) {\n      config.headers['Authorization'] = `Token ${token}`;\n    }\n  \n    return config;\n  };"]},"metadata":{},"sourceType":"module"}