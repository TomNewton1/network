{"version":3,"file":"index.esm.js","sources":["../src/castArray.js","../src/useOuterClick.js","../src/OuterClick.js"],"sourcesContent":["const castArray = (value) => (Array.isArray(value) ? value : [value]);\n\nexport default castArray;\n","import { useEffect, useRef } from 'react';\nimport invariant from 'tiny-invariant';\nimport castArray from './castArray';\n\nconst useOuterClick = (refs, handler) => {\n  invariant(\n    Array.isArray(refs) || (typeof refs === 'object' && refs !== null),\n    'Expected `refs` to be an array or object'\n  );\n  if (Array.isArray(refs)) {\n    invariant(refs.length > 0, 'Expected `refs` to to not be empty');\n    refs.forEach((ref, i) => {\n      invariant(\n        typeof ref === 'object' && ref !== null,\n        `Expected \\`refs[${i}]\\` to be an object`\n      );\n    });\n  }\n  invariant(\n    typeof handler === 'function' || handler == null,\n    'Expected `handler` to be a function'\n  );\n\n  const eventListenerRef = useRef();\n\n  useEffect(() => {\n    eventListenerRef.current = (event) => {\n      if (\n        castArray(refs).every(\n          (ref) =>\n            !ref.current ||\n            (ref.current !== event.target &&\n              !ref.current.contains(event.target))\n        )\n      ) {\n        handler?.(event);\n      }\n    };\n  }, [handler, refs]);\n\n  useEffect(() => {\n    const eventListener = (event) => {\n      eventListenerRef.current(event);\n    };\n    ['mousedown', 'touchstart'].forEach((type) => {\n      document.addEventListener(type, eventListener, true);\n    });\n    return () => {\n      ['mousedown', 'touchstart'].forEach((type) => {\n        document.removeEventListener(type, eventListener, true);\n      });\n    };\n  }, []);\n};\n\nexport default useOuterClick;\n","import PropTypes from 'prop-types';\nimport * as React from 'react';\nimport { useRef } from 'react';\nimport useComposedRef from 'use-composed-ref';\nimport useOuterClick from './useOuterClick';\n\nconst OuterClick = React.forwardRef(function OuterClick(\n  { as: Element = 'div', children = null, onOuterClick = null, ...rest },\n  userRef\n) {\n  const libRef = useRef();\n  const ref = useComposedRef(libRef, userRef);\n  useOuterClick(libRef, onOuterClick);\n  return (\n    <Element {...rest} ref={ref}>\n      {children}\n    </Element>\n  );\n});\n\nOuterClick.propTypes = {\n  as: PropTypes.elementType,\n  children: PropTypes.node,\n  onOuterClick: PropTypes.func,\n};\n\nexport default OuterClick;\n"],"names":["castArray","value","Array","isArray","useOuterClick","refs","handler","invariant","length","forEach","ref","i","eventListenerRef","useRef","useEffect","current","event","every","target","contains","eventListener","type","document","addEventListener","removeEventListener","OuterClick","React","forwardRef","userRef","as","Element","children","onOuterClick","rest","libRef","useComposedRef","propTypes","PropTypes","elementType","node","func"],"mappings":"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"}